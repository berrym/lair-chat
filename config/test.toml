# Test Configuration for Lair Chat
# This configuration is used during Phase 8 testing and validation

[database]
url = "sqlite://test_lair_chat.db"
max_connections = 50
connection_timeout = 30

[server]
host = "127.0.0.1"
port = 8081
tcp_port = 3335
max_connections = 1000
connection_timeout = 60
shutdown_timeout = 30

[security]
# Rate limiting configuration for testing
rate_limit = 1000
max_connections = 1000
session_timeout = 3600
max_login_attempts = 5
lockout_duration = 300
ip_ban_duration = 3600

# JWT configuration
jwt_secret = "test_jwt_secret_key_for_testing_only_do_not_use_in_production"
jwt_expiration = 86400

# Password hashing
password_hash_cost = 4 # Lower cost for faster testing

[logging]
level = "debug"
file = "test_lair_chat.log"
max_size = "10MB"
max_files = 5

[validation]
# Input validation limits for testing
max_input_length = 4096
max_username_length = 50
max_room_name_length = 100
max_message_length = 2048

# Command validation
allowed_commands = [
    "join",
    "leave",
    "msg",
    "dm",
    "say",
    "help",
    "list",
    "create",
    "invite",
    "accept",
    "decline",
    "kick",
    "ban",
    "unban",
    "admin",
    "status",
    "quit",
]

[monitoring]
# Performance monitoring settings
enable_metrics = true
metrics_interval = 1
alert_thresholds = { max_response_time = 100, max_error_rate = 5.0, max_memory_usage = 80.0 }

# System monitoring
track_cpu = true
track_memory = true
track_connections = true
track_operations = true

[error_handling]
# Error handling configuration
enable_retry = true
max_retries = 3
retry_delay = 100
circuit_breaker_threshold = 5
circuit_breaker_timeout = 30000

# Error reporting
detailed_errors = true
error_tracking = true

[testing]
# Test-specific configuration
enable_test_mode = true
test_database = "test_lair_chat.db"
test_data_cleanup = true
performance_testing = true
load_testing = true
security_testing = true

# Load testing parameters
concurrent_users = 100
test_duration = 180
stress_duration = 300

# Security testing
enable_penetration_testing = true
simulate_attacks = true
test_rate_limiting = true
test_input_validation = true

[encryption]
# Encryption settings for testing
key_derivation_iterations = 1000 # Lower for faster testing
enable_encryption = true
algorithm = "AES-256-GCM"

[rooms]
# Room management for testing
max_rooms = 1000
max_users_per_room = 100
default_room = "general"
auto_create_rooms = true

[features]
# Feature flags for testing
enable_direct_messages = true
enable_file_sharing = false     # Disabled for testing
enable_admin_panel = true
enable_room_invitations = true
enable_user_registration = true

[admin]
# Admin configuration for testing
default_admin_user = "admin"
default_admin_password = "test_admin_password_change_in_production"
admin_session_timeout = 7200

[api]
# REST API configuration for testing
enable_api = true
api_version = "v1"
cors_enabled = true
cors_origins = ["http://localhost:3000", "http://127.0.0.1:3000"]

[websocket]
# WebSocket configuration
enable_websockets = true
ping_interval = 30
pong_timeout = 10
max_message_size = 65536

[backup]
# Backup configuration for testing
enable_backups = false             # Disabled during testing
backup_interval = 3600
max_backups = 5
backup_location = "./test_backups"

[performance]
# Performance tuning for testing
worker_threads = 4
max_blocking_threads = 8
event_loop_threads = 2
stack_size = 2097152

# Memory management
max_memory_usage = 1073741824 # 1GB
gc_threshold = 536870912      # 512MB

[alerts]
# Alert configuration for testing
enable_alerts = true
alert_channels = ["console", "file"]
alert_levels = ["warning", "critical", "emergency"]

# Alert thresholds
cpu_threshold = 80.0
memory_threshold = 85.0
error_rate_threshold = 10.0
response_time_threshold = 500

[integration]
# Integration testing configuration
test_all_features = true
test_user_workflows = true
test_admin_workflows = true
test_error_scenarios = true
test_security_scenarios = true
test_performance_scenarios = true

# Test users for integration testing
test_users = [
    { username = "alice", password = "test_password_alice", role = "user" },
    { username = "bob", password = "test_password_bob", role = "user" },
    { username = "charlie", password = "test_password_charlie", role = "moderator" },
    { username = "test_admin", password = "test_admin_password", role = "admin" },
]

# Test rooms for integration testing
test_rooms = [
    { name = "general", public = true, max_users = 100 },
    { name = "testing", public = true, max_users = 50 },
    { name = "private_room", public = false, max_users = 10 },
    { name = "admin_only", public = false, max_users = 5, admin_only = true },
]
