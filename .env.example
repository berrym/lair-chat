# Lair Chat Server Environment Variables
# Copy this file to .env and customize the values as needed

# =============================================================================
# Server Configuration
# =============================================================================

# Server bind address (use 0.0.0.0 to bind to all interfaces)
LAIR_CHAT_SERVER_HOST=127.0.0.1

# Server port
LAIR_CHAT_SERVER_PORT=8080

# Maximum concurrent connections
LAIR_CHAT_SERVER_MAX_CONNECTIONS=1000

# Connection timeout in seconds
LAIR_CHAT_SERVER_CONNECTION_TIMEOUT=30

# Enable TLS/SSL encryption
LAIR_CHAT_SERVER_ENABLE_TLS=false

# TLS certificate and key paths (required if TLS is enabled)
# LAIR_CHAT_SERVER_TLS_CERT_PATH=/path/to/cert.pem
# LAIR_CHAT_SERVER_TLS_KEY_PATH=/path/to/key.pem

# =============================================================================
# Database Configuration
# =============================================================================

# Database type: sqlite, postgresql, mysql
LAIR_CHAT_DATABASE_TYPE=sqlite

# Database connection URL
# SQLite: data/lair-chat.db or :memory: for in-memory
# PostgreSQL: postgresql://user:pass@localhost/dbname
# MySQL: mysql://user:pass@localhost/dbname
LAIR_CHAT_DATABASE_URL=data/lair-chat.db

# Database connection pool settings
LAIR_CHAT_DATABASE_MAX_CONNECTIONS=10
LAIR_CHAT_DATABASE_MIN_CONNECTIONS=1
LAIR_CHAT_DATABASE_CONNECTION_TIMEOUT=30

# Automatically run migrations on startup
LAIR_CHAT_DATABASE_AUTO_MIGRATE=true

# =============================================================================
# Security Configuration
# =============================================================================

# Enable end-to-end encryption
LAIR_CHAT_SECURITY_ENABLE_ENCRYPTION=true

# Session timeout in seconds (24 hours = 86400)
LAIR_CHAT_SECURITY_SESSION_TIMEOUT=86400

# Maximum login attempts before lockout
LAIR_CHAT_SECURITY_MAX_LOGIN_ATTEMPTS=5

# Account lockout duration in seconds (15 minutes = 900)
LAIR_CHAT_SECURITY_LOCKOUT_DURATION=900

# Password requirements
LAIR_CHAT_SECURITY_PASSWORD_MIN_LENGTH=8
LAIR_CHAT_SECURITY_PASSWORD_REQUIRE_SPECIAL=true
LAIR_CHAT_SECURITY_PASSWORD_REQUIRE_NUMBERS=true
LAIR_CHAT_SECURITY_PASSWORD_REQUIRE_UPPERCASE=true

# Enable two-factor authentication
LAIR_CHAT_SECURITY_ENABLE_2FA=false

# JWT secret for session tokens (generate a secure random string)
# IMPORTANT: Generate a unique, long, random string for production!
# LAIR_CHAT_SECURITY_JWT_SECRET=your-very-long-and-random-secret-key-here

# Argon2 password hashing parameters
LAIR_CHAT_SECURITY_ARGON2_MEMORY_COST=65536
LAIR_CHAT_SECURITY_ARGON2_TIME_COST=3
LAIR_CHAT_SECURITY_ARGON2_PARALLELISM=4

# =============================================================================
# Logging Configuration
# =============================================================================

# Log level: trace, debug, info, warn, error, off
LAIR_CHAT_LOGGING_LEVEL=info

# Log format: json, pretty, compact
LAIR_CHAT_LOGGING_FORMAT=pretty

# Enable file logging
LAIR_CHAT_LOGGING_ENABLE_FILE_LOGGING=true

# Log file path
LAIR_CHAT_LOGGING_FILE_PATH=logs/server.log

# Enable console output
LAIR_CHAT_LOGGING_ENABLE_STDOUT=true

# Use JSON format for structured logging
LAIR_CHAT_LOGGING_ENABLE_JSON=false

# =============================================================================
# Feature Flags
# =============================================================================

# Enable direct messaging between users
LAIR_CHAT_FEATURES_ENABLE_DIRECT_MESSAGES=true

# Allow users to create their own rooms
LAIR_CHAT_FEATURES_ENABLE_USER_ROOM_CREATION=true

# Enable file uploads (disabled by default for security)
LAIR_CHAT_FEATURES_ENABLE_FILE_UPLOADS=false

# Maximum file upload size in MB
LAIR_CHAT_FEATURES_MAX_FILE_SIZE=10

# Enable persistent message history
LAIR_CHAT_FEATURES_ENABLE_MESSAGE_HISTORY=true

# Message history retention in days (0 = unlimited)
LAIR_CHAT_FEATURES_MESSAGE_HISTORY_RETENTION=0

# Enable full-text message search
LAIR_CHAT_FEATURES_ENABLE_MESSAGE_SEARCH=true

# Enable user profiles and avatars
LAIR_CHAT_FEATURES_ENABLE_USER_PROFILES=true

# Enable online/offline presence indicators
LAIR_CHAT_FEATURES_ENABLE_PRESENCE=true

# Enable typing indicators
LAIR_CHAT_FEATURES_ENABLE_TYPING_INDICATORS=true

# Enable message reactions (emoji)
LAIR_CHAT_FEATURES_ENABLE_REACTIONS=true

# =============================================================================
# Rate Limiting and Resource Limits
# =============================================================================

# Maximum messages per minute per user
LAIR_CHAT_LIMITS_MESSAGES_PER_MINUTE=60

# Maximum message length in characters
LAIR_CHAT_LIMITS_MAX_MESSAGE_LENGTH=4000

# Maximum username length
LAIR_CHAT_LIMITS_MAX_USERNAME_LENGTH=32

# Maximum room name length
LAIR_CHAT_LIMITS_MAX_ROOM_NAME_LENGTH=50

# Maximum concurrent connections per IP address
LAIR_CHAT_LIMITS_MAX_CONNECTIONS_PER_IP=10

# Memory limit in MB (for monitoring)
LAIR_CHAT_LIMITS_MEMORY_LIMIT=512

# CPU usage limit percentage (for monitoring)
LAIR_CHAT_LIMITS_CPU_LIMIT=80.0

# =============================================================================
# Administrative Interface
# =============================================================================

# Enable admin API for server management
LAIR_CHAT_ADMIN_ENABLE_ADMIN_API=true

# Admin API bind address
LAIR_CHAT_ADMIN_ADMIN_HOST=127.0.0.1

# Admin API port
LAIR_CHAT_ADMIN_ADMIN_PORT=8081

# Admin authentication token (generate a secure random string)
# IMPORTANT: Generate a unique, long, random string for production!
# LAIR_CHAT_ADMIN_ADMIN_TOKEN=your-admin-token-here

# Enable Prometheus metrics endpoint
LAIR_CHAT_ADMIN_ENABLE_METRICS=true

# Enable health check endpoint
LAIR_CHAT_ADMIN_ENABLE_HEALTH_CHECK=true

# Enable debug endpoints (disable in production)
LAIR_CHAT_ADMIN_ENABLE_DEBUG_ENDPOINTS=false

# =============================================================================
# Production Overrides
# =============================================================================

# Uncomment and customize these for production deployments:

# Bind to all interfaces in production
# LAIR_CHAT_SERVER_HOST=0.0.0.0

# Use PostgreSQL in production
# LAIR_CHAT_DATABASE_TYPE=postgresql
# LAIR_CHAT_DATABASE_URL=postgresql://lair_chat:password@localhost/lair_chat_prod

# Enhanced security for production
# LAIR_CHAT_SECURITY_SESSION_TIMEOUT=3600
# LAIR_CHAT_SECURITY_MAX_LOGIN_ATTEMPTS=3
# LAIR_CHAT_SECURITY_ENABLE_2FA=true

# JSON logging for production
# LAIR_CHAT_LOGGING_LEVEL=warn
# LAIR_CHAT_LOGGING_FORMAT=json
# LAIR_CHAT_LOGGING_ENABLE_JSON=true

# Stricter limits for production
# LAIR_CHAT_LIMITS_MESSAGES_PER_MINUTE=30
# LAIR_CHAT_LIMITS_MAX_CONNECTIONS_PER_IP=5

# Secure admin access
# LAIR_CHAT_ADMIN_ENABLE_DEBUG_ENDPOINTS=false

# =============================================================================
# Development Overrides
# =============================================================================

# Uncomment these for development:

# In-memory database for development
# LAIR_CHAT_DATABASE_URL=:memory:

# Verbose logging for development
# LAIR_CHAT_LOGGING_LEVEL=debug

# Relaxed security for development
# LAIR_CHAT_SECURITY_PASSWORD_MIN_LENGTH=4
# LAIR_CHAT_SECURITY_PASSWORD_REQUIRE_SPECIAL=false
# LAIR_CHAT_SECURITY_MAX_LOGIN_ATTEMPTS=10

# Enable all features for development
# LAIR_CHAT_FEATURES_ENABLE_FILE_UPLOADS=true
# LAIR_CHAT_ADMIN_ENABLE_DEBUG_ENDPOINTS=true

# =============================================================================
# Docker Overrides
# =============================================================================

# These are useful when running in Docker containers:

# LAIR_CHAT_SERVER_HOST=0.0.0.0
# LAIR_CHAT_DATABASE_URL=postgresql://lair_chat:password@postgres:5432/lair_chat
# LAIR_CHAT_LOGGING_ENABLE_STDOUT=true
# LAIR_CHAT_LOGGING_ENABLE_FILE_LOGGING=false

# =============================================================================
# Security Notes
# =============================================================================

# 1. Always generate unique, random secrets for JWT and admin tokens
# 2. Use strong passwords for database connections
# 3. Enable TLS in production with valid certificates
# 4. Use environment-specific configurations
# 5. Never commit this file with real secrets to version control
# 6. Consider using secret management tools for production deployments
# 7. Regularly rotate secrets and tokens
# 8. Monitor and audit configuration changes

# =============================================================================
# Generating Secure Secrets
# =============================================================================

# You can generate secure secrets using these commands:

# For JWT secret (64 characters):
# openssl rand -hex 32

# For admin token (32 characters):
# openssl rand -hex 16

# For UUID-based tokens:
# uuidgen

# For base64 encoded secrets:
# openssl rand -base64 32
